(this["webpackJsonpphaser-example"]=this["webpackJsonpphaser-example"]||[]).push([[0],{469:function(e,t,n){},487:function(e,t){},488:function(e,t){},506:function(e,t){},507:function(e,t){},517:function(e,t){},519:function(e,t){},529:function(e,t){},531:function(e,t){},557:function(e,t){},559:function(e,t){},564:function(e,t){},566:function(e,t){},572:function(e,t){},574:function(e,t){},586:function(e,t){},589:function(e,t){},594:function(e,t){},744:function(e,t,n){"use strict";n.r(t);var c,r,s,a,i,o=n(12),u=n.n(o),l=n(446),d=n.n(l),h=(n(469),n(1)),j=n(11),b={address:"",setAddress:function(){}},f=Object(o.createContext)(b),p=function(e){var t=e.children,n=Object(o.useState)(b.address),c=Object(h.a)(n,2),r=c[0],s=c[1];return Object(j.jsx)(f.Provider,{value:{address:r,setAddress:s},children:t})},m=f,O={modules:void 0,setModules:function(){}},x=Object(o.createContext)(O),v=function(e){var t=e.children,n=Object(o.useState)(O.modules),c=Object(h.a)(n,2),r=c[0],s=c[1];return Object(j.jsx)(x.Provider,{value:{modules:r,setModules:s},children:t})},y=x,g=function(e){var t=e.children;return Object(j.jsx)(v,{children:Object(j.jsx)(p,{children:t})})},w=n(447),k=n.n(w),C=n(22),A=n(16),S=n.n(A),E=n(94),I=n(95),M="#d16d26",T="#212021",P=I.a.button(c||(c=Object(E.a)(["\n  display: inline-block;\n  color: white;\n  background-color: ",";\n  font-size: 1em;\n  margin-top: 1em;\n  margin-bottom: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid ",";\n  border-radius: 1vh;\n  display: block;\n  &:hover {\n    background-color: ",";\n    color: ",";\n  }\n"])),T,M,M,T),B=I.a.input(r||(r=Object(E.a)(["\n  border: 2px solid;\n  border-radius: 3px;\n"]))),D=I.a.text(s||(s=Object(E.a)(["\n  font-size: 2em;\n  color: white;\n  font-family: monospace,monospace;\n"]))),N=n(757),z=Object(I.a)(N.a)(a||(a=Object(E.a)(["\n  border: 2px solid ",";\n  border-radius: 1vh;\n  background-color: ",";\n  padding: 1em;\n  display: flex;\n  flex-direction: column;\n"])),M,T),F=I.a.text(i||(i=Object(E.a)(["\n  font-size: 1em;\n  color: white;\n  font-family: monospace,monospace;\n"]))),G=function(){var e=Object(o.useContext)(y).modules;if(!e)throw new Error("Mox modules not initialized");var t=Object(o.useContext)(m).setAddress,n=Object(o.useState)(""),c=Object(h.a)(n,2),r=c[0],s=c[1],a=Object(o.useState)(""),i=Object(h.a)(a,2),u=i[0],l=i[1],d=function(){var n=Object(C.a)(S.a.mark((function n(){var c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l(""),!(r.length<1)){n.next=3;break}return n.abrupt("return",l("Invalid seed: empty"));case 3:try{e.account.setSeed(r),e.account.enableAccountBySeed(),c=e.account.publicKey(),t(c)}catch(s){l(s.message)}case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(j.jsxs)(z,{children:[Object(j.jsx)(D,{children:"Enter with your seed:"}),Object(j.jsx)(F,{style:{color:"red"},children:u}),Object(j.jsx)(B,{value:r,onChange:function(e){return s(e.target.value)}}),Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(j.jsx)(P,{style:{width:"40%"},onClick:d,children:" Enter "}),Object(j.jsx)(P,{style:{width:"40%"},onClick:function(){l(""),e.account.createMnemonic();var t=e.account.mnemonicToSeed();s(t)},children:" Create seed "})]})]})},L=function(){return Object(j.jsx)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center"},children:Object(j.jsx)(G,{})})},_=n(754),J=n(753),V=n(755),W=function(){var e=Object(o.useContext)(y).modules,t=Object(o.useContext)(m),n=t.address,c=t.setAddress;if(0===n.length)throw new Error("Account not set");if(!e)throw new Error("Mox not initialize");return Object(j.jsx)(P,{onClick:function(){e.account.disableAccount(),c("")},children:"Disable Account"})},K=function(){var e=Object(o.useContext)(m).address;return Object(j.jsx)(J.a,{children:Object(j.jsxs)(_.a,{style:{alignItems:"center"},children:[Object(j.jsx)(V.a,{style:{flex:1},children:Object(j.jsx)(W,{})}),Object(j.jsx)(V.a,{style:{flex:5},children:Object(j.jsxs)(F,{children:["Address: ",e]})})]})})},U=n(756),H=n.p+"static/media/Brute_1.cfe096f3.png",R=function(e){var t=e.actor;if(!t)throw new Error("Actor not set");return Object(j.jsxs)(z,{children:[Object(j.jsx)(V.a,{children:Object(j.jsx)(U.a,{src:H,width:"50vh",height:"50vh"})}),Object(j.jsxs)(V.a,{children:[Object(j.jsxs)(_.a,{children:["Type: ",t.common_type]}),Object(j.jsxs)(_.a,{children:["ID: ",t.id]}),Object(j.jsxs)(_.a,{children:["Owner: ",t.owner]}),Object(j.jsxs)(_.a,{children:["Speed: ",t.speed]})]})]})},X=function(e){var t=Object(o.useContext)(y).modules,n=Object(o.useContext)(m).address;if(0===n.length)throw new Error("Account not set");if(!t)throw new Error("Mox not initialize");var c=Object(o.useState)(""),r=Object(h.a)(c,2),s=r[0],a=r[1],i=function(){var c=Object(C.a)(S.a.mark((function c(){var r,a,i;return S.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(66===s.length){c.next=2;break}return c.abrupt("return");case 2:return c.next=4,t.storage.getActor(s);case 4:if(a=c.sent,console.log("Actor",a),a){c.next=8;break}return c.abrupt("return");case 8:if(a.owner===n){c.next=10;break}return c.abrupt("return");case 10:return c.next=12,t.storage.getActorAttribute(s,"0xb8e540f80463545c522611d6a11fd055e901bed49887bbafda7d6dd865b1a650");case 12:(i=c.sent).value=i.value>600?600:i.value,console.log("Speed",i),e.setActor({common_type:a.commonType,id:s,owner:a.owner,speed:null!==(r=i.value)&&void 0!==r?r:300});case 16:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();return Object(j.jsxs)(z,{children:[Object(j.jsx)(D,{children:"Enter with your actor hash"}),Object(j.jsx)(B,{value:s,onChange:function(e){return a(e.target.value)},placeholder:"0x..."}),Object(j.jsx)(P,{onClick:i,disabled:66!==s.length,children:"Get Char"})]})},q=function(e){return Object(o.useEffect)((function(){e.actor&&e.setSpeed(e.actor.speed)}),[e.actor]),e.actor?Object(j.jsx)(R,{actor:e.actor}):Object(j.jsx)(X,{setActor:e.setActor})},Q=n(28),Y=function(e){var t=Object(o.useContext)(y).modules,n=Object(o.useContext)(m).address;if(0===n.length)throw new Error("Account not set");if(!t)throw new Error("Mox not initialize");var c=Object(o.useState)(0),r=Object(h.a)(c,2),s=r[0],a=r[1],i=Object(o.useState)({value:0,operation:!1}),u=Object(h.a)(i,2),l=u[0],d=u[1],b=function(){var n=Object(C.a)(S.a.mark((function n(){var c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.getItemActions(e.itemId);case 2:(c=n.sent).length>0&&d({operation:c[0].operation,value:c[0].amount});case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),f=function(){var c=Object(C.a)(S.a.mark((function c(){var r;return S.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,t.storage.getItemBalances(e.itemId,n);case 3:(r=c.sent)&&a(r.amount),c.next=10;break;case 7:c.prev=7,c.t0=c.catch(0),console.log("No item balance");case 10:case"end":return c.stop()}}),c,null,[[0,7]])})));return function(){return c.apply(this,arguments)}}(),p=function(){var n=Object(C.a)(S.a.mark((function n(){var c,r;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==s){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.item.consumeItem({actorId:e.actor.id,itemId:e.itemId},64);case 4:return c=n.sent,n.next=7,t.transaction.signAndSendTransaction(c);case 7:r=n.sent,console.log("Tx hash",r),a(s-1),e.setActor(Object(Q.a)(Object(Q.a)({},e.actor),{},{speed:e.actor.speed+(l.operation?l.value:-l.value)}));case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(o.useEffect)((function(){b(),f()}),[]),Object(j.jsxs)(z,{children:[Object(j.jsx)(_.a,{children:Object(j.jsx)(U.a,{src:e.itemAsset,width:"50vh",height:"50vh"})}),Object(j.jsx)(_.a,{children:l.operation?Object(j.jsxs)("p",{children:[" Increase your speed by ",l.value," "]}):Object(j.jsxs)("p",{children:[" Decrease your speed by ",l.value," "]})}),Object(j.jsx)(_.a,{children:Object(j.jsxs)(P,{disabled:0===s,onClick:p,children:[" Consume ",e.itemName," (Available ",s,") "]})})]})},Z=n.p+"static/media/increaseSpeedPotion.2481880e.png",$=n.p+"static/media/decreaseSpeedPotion.abbaf22e.png",ee=function(e){return e.actor?Object(j.jsxs)("div",{style:{display:"flex",width:"70vh",justifyContent:"space-between"},children:[Object(j.jsx)(Y,{actor:e.actor,setActor:e.setActor,itemAsset:Z,itemId:"0x2372c9bb4e2008aa42b7c67533af805aa7477eaac133e16f617ce9e1af888f34",itemName:"Increase speed potion"}),Object(j.jsx)(Y,{actor:e.actor,setActor:e.setActor,itemAsset:$,itemId:"0xc71943886a686e3ae37929e0c4ab9074675eef04c1fa69f363af432a89756ab6",itemName:"Decrease speed potion"})]}):Object(j.jsx)(D,{children:"Load actor to see the available items"})},te=n(2),ne=n(3),ce=n(6),re=n(7),se=n(140),ae=n.n(se),ie=function(e){var t=function(t){Object(ce.a)(c,t);var n=Object(re.a)(c);function c(){var e;return Object(te.a)(this,c),(e=n.call(this,"PlayGame")).gameOver=!1,e.gameWin=!1,e.map=void 0,e.layer=void 0,e.hero=void 0,e.star=void 0,e.enemy=void 0,e.counterNewEnemy=0,e}return Object(ne.a)(c,[{key:"preload",value:function(){this.load.tilemapTiledJSON("level","assets/level.json"),this.load.image("tile","assets/tile.png"),this.load.image("hero","assets/Brute_1.png"),this.load.image("enemy","assets/bomb.png"),this.load.image("star","assets/star.png")}},{key:"create",value:function(){this.map=this.make.tilemap({key:"level"});var t=this.map.addTilesetImage("tileset01","tile");this.layer=this.map.createStaticLayer("layer01",t),this.layer.setCollision(1),this.hero=this.physics.add.sprite(260,376,"hero"),this.hero.setBounce(1),this.hero.setVelocity(e.speed*Math.cos(Math.PI/4),e.speed*Math.sin(Math.PI/4)),this.star=this.physics.add.sprite(800,400,"star"),this.star.setBounce(1),this.star.setVelocity(100*Math.cos(Math.PI/4),100*Math.sin(Math.PI/4)),this.physics.add.collider(this.hero,this.star,this.hitStar,void 0,this),this.enemy=this.physics.add.group(),this.physics.add.collider(this.enemy,this.layer),this.physics.add.collider(this.hero,this.enemy,this.hitEnemy,void 0,this),this.input.on("pointerdown",this.changeDirection,this),this.cameras.main.setBounds(0,0,1920,1440),this.cameras.main.startFollow(this.hero)}},{key:"hitStar",value:function(e,t){this.physics.pause(),this.hero.setTint(65280),this.gameWin=!0}},{key:"hitEnemy",value:function(e,t){this.physics.pause(),this.hero.setTint(16711680),this.gameOver=!0}},{key:"changeDirection",value:function(){this.hero.body.velocity.y*=-1}},{key:"createEnemy",value:function(){if(this.counterNewEnemy>=150){var e=ae.a.Math.Between(460,640);this.enemy.create(e,16,"enemy").setBounce(1),this.enemy.setVelocity(180*Math.cos(Math.PI/4),180*Math.sin(Math.PI/4)),this.counterNewEnemy=0}else this.counterNewEnemy++}},{key:"update",value:function(){var t=this;this.physics.world.collide(this.hero,this.layer),this.physics.world.collide(this.enemy,this.layer),this.physics.world.collide(this.star,this.layer),this.hero.flipX=this.hero.body.velocity.x<0,this.createEnemy(),!0!==this.gameOver&&!0!==this.gameWin||setTimeout((function(){t.scene.remove(t),e.endGame()}),1e3)}}]),c}(ae.a.Scene);return Object(o.useEffect)((function(){var e={type:ae.a.AUTO,backgroundColor:4473924,scale:{mode:ae.a.Scale.FIT,autoCenter:ae.a.Scale.CENTER_BOTH,width:640,height:480},physics:{default:"arcade",arcade:{gravity:{y:0}}},scene:t};new ae.a.Game(e)}),[]),Object(j.jsx)("div",{id:"phaser-game"})},oe=function(){var e=Object(o.useState)(null),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(!1),s=Object(h.a)(r,2),a=s[0],i=s[1],u=Object(o.useState)(),l=Object(h.a)(u,2),d=l[0],b=l[1];Object(o.useEffect)((function(){var e;c(null!==(e=null===d||void 0===d?void 0:d.speed)&&void 0!==e?e:300)}),[d,a]);return a?Object(j.jsx)(ie,{speed:null!==n&&void 0!==n?n:300,endGame:function(){i(!1)}}):Object(j.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"space-around",flexDirection:"column",alignItems:"center"},children:[Object(j.jsx)(_.a,{children:Object(j.jsx)(K,{})}),Object(j.jsx)(_.a,{children:Object(j.jsx)(q,{actor:d,setActor:b,setSpeed:c})}),Object(j.jsx)(_.a,{children:Object(j.jsx)(ee,{actor:d,setActor:b})}),Object(j.jsx)(_.a,{children:!1===a&&Object(j.jsx)(P,{disabled:!n,onClick:function(){return i(!0)},children:"Start Game"})})]})};var ue=function(){var e=Object(o.useContext)(y),t=e.modules,n=e.setModules,c=Object(o.useContext)(m).address;return Object(o.useEffect)((function(){k()({network:"apertio",serviceUrl:"https://arpetio.moxchain.com"}).then((function(e){n(e)}))}),[]),null==t?Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:" Loading Mox SDK "})}):0===c.length?Object(j.jsx)(L,{}):Object(j.jsx)(oe,{})};var le=function(){return Object(j.jsx)(g,{children:Object(j.jsx)(ue,{})})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,758)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};d.a.render(Object(j.jsx)(u.a.StrictMode,{children:Object(j.jsx)(le,{})}),document.getElementById("root")),de()}},[[744,1,2]]]);
//# sourceMappingURL=main.b9235e1d.chunk.js.map